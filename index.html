<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Predmachlearn project : " />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Predmachlearn project</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/JeffreyP506/predmachlearn_project">View on GitHub</a>

          <h1 id="project_title">Predmachlearn project</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/JeffreyP506/predmachlearn_project/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/JeffreyP506/predmachlearn_project/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>&lt;!DOCTYPE html&gt;</p>



<p>
</p>
<p></p>Weight Lifting Error Prediction
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {   
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}


   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
<p></p>

<p></p>

<h1>
<a name="weight-lifting-error-prediction" class="anchor" href="#weight-lifting-error-prediction"><span class="octicon octicon-link"></span></a>Weight Lifting Error Prediction</h1>

<h3>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h3>

<p>This is a project homework of <strong>Practical Machine Learning</strong> by Johns Hopkins on coursera.</p>

<h3>
<a name="data" class="anchor" href="#data"><span class="octicon octicon-link"></span></a>Data</h3>

<p>The training data for this project are available here: </p>

<p>[<a href="https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv">https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv</a>]</p>

<p>The test data are available here: </p>

<p>[<a href="https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv">https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv</a>]</p>

<p>The data for this project come from this source: [<a href="http://groupware.les.inf.puc-rio.br/har">http://groupware.les.inf.puc-rio.br/har</a>]. </p>

<h3>
<a name="goal" class="anchor" href="#goal"><span class="octicon octicon-link"></span></a>Goal</h3>

<p>The data is from accelerometers on the belt, forearm, arm, and dumbell of 6 participants. They were asked to perform barbell lifts correctly and incorrectly in 5 different ways.
My goal is using the machine learning techniques I learned to train a model based on the training data to predict test data.</p>

<h3>
<a name="method-selection" class="anchor" href="#method-selection"><span class="octicon octicon-link"></span></a>Method Selection</h3>

<p>This is clearly a classification problem. </p>

<pre><code>training &lt;- read.csv("pml-training.csv")
testing &lt;- read.csv("pml-testing.csv")
</code></pre>

<pre><code>## Loading required package: lattice
## Loading required package: ggplot2
</code></pre>

<pre><code>dim(training)
</code></pre>

<pre><code>## [1] 19622   160
</code></pre>

<p>Based on the fact there're a lot of variables in the dataset, my first hunch is <em>randome forest</em>.</p>

<h3>
<a name="data-processing" class="anchor" href="#data-processing"><span class="octicon octicon-link"></span></a>Data Processing</h3>

<p>There're a lot of rows containing all <em>NA</em> in the <em>testing</em> dataset, so I decided to exclude these variables from <em>training</em>
dataset.</p>

<pre><code>test &lt;- testing[, -which(apply(testing, 2, function(x) all(is.na(x))))]
</code></pre>

<p>Variables like X, user_name, raw_timestamp_part_1, raw_timestamp_part_2, cvtd_timestamp, new_window do not likely to be useful to predict the result, so I remove them too.</p>

<pre><code>select &lt;- colnames(subset(test, select = -c(X, user_name, raw_timestamp_part_1, 
    raw_timestamp_part_2, cvtd_timestamp, new_window, problem_id)))
</code></pre>

<p>I split the training dataset into two parts, <em>train</em> for training the model, <em>mytest</em> for testing my model.</p>

<pre><code>inTrain &lt;- createDataPartition(y = training$classe, p = 0.6, list = F)
training &lt;- training[, c(select, "classe")]
train &lt;- training[inTrain, ]
mytest &lt;- training[-inTrain, ]
</code></pre>

<h3>
<a name="model-training" class="anchor" href="#model-training"><span class="octicon octicon-link"></span></a>Model Training</h3>

<p>By default, <em>train()</em> use bootstrap method which is expensive for my laptop, so change it to <em>cross validation</em></p>

<pre><code>trControl = trainControl(method = "cv", number = 2)
modFit &lt;- train(classe ~ ., data = train, method = "rf", trControl = trControl)
</code></pre>

<h3>
<a name="cross-validation" class="anchor" href="#cross-validation"><span class="octicon octicon-link"></span></a>Cross Validation</h3>

<pre><code>pred &lt;- predict(modFit, mytest)
confusionMatrix(mytest$classe, pred)
</code></pre>

<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 2231    1    0    0    0
##          B    1 1516    1    0    0
##          C    0    0 1368    0    0
##          D    0    0    5 1281    0
##          E    0    0    0    9 1433
## 
## Overall Statistics
##                                         
##                Accuracy : 0.998         
##                  95% CI : (0.997, 0.999)
##     No Information Rate : 0.284         
##     P-Value [Acc &gt; NIR] : &lt;2e-16        
##                                         
##                   Kappa : 0.997         
##  Mcnemar's Test P-Value : NA            
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity             1.000    0.999    0.996    0.993    1.000
## Specificity             1.000    1.000    1.000    0.999    0.999
## Pos Pred Value          1.000    0.999    1.000    0.996    0.994
## Neg Pred Value          1.000    1.000    0.999    0.999    1.000
## Prevalence              0.284    0.193    0.175    0.164    0.183
## Detection Rate          0.284    0.193    0.174    0.163    0.183
## Detection Prevalence    0.284    0.193    0.174    0.164    0.184
## Balanced Accuracy       1.000    1.000    0.998    0.996    0.999
</code></pre>

<p>The <strong>Accuracy</strong> is pretty high, based on the fact that <strong>out of sample error</strong> is 1 - accuracy, we can say the out of sample error is very low. So this model is good enough.</p>

<h3>
<a name="generating-results-files-for-course-project-submission" class="anchor" href="#generating-results-files-for-course-project-submission"><span class="octicon octicon-link"></span></a>Generating Results Files For Course Project Submission</h3>

<pre><code>finalpred &lt;- predict(modFit, test)

pml_write_files = function(x) {
    n = length(x)
    for (i in 1:n) {
        filename = paste0("problem_id_", i, ".txt")
        write.table(x[i], file = filename, quote = FALSE, row.names = FALSE, 
            col.names = FALSE)
    }
}

pml_write_files(as.character(finalpred))
</code></pre>

<p></p>

<p></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Predmachlearn project maintained by <a href="https://github.com/JeffreyP506">JeffreyP506</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
